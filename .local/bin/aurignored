#!/bin/bash

# Get list of ignored pkgs
function ignored() {
    pkgs="$(grep IgnorePkg /etc/pacman.conf | sed -e 's/IgnorePkg =//' -e 's/#.*//')"
    grps="$(grep IgnoreGroup /etc/pacman.conf | sed -e 's/IgnoreGroup =//' -e 's/#.*//')"
    [[ -n $grps ]] && pkgs="$pkgs $(pacman -Sgq $grps)"

    echo -n "$pkgs" | tail -n -1
}

# Return only AUR pkgs
for pkg in $(ignored)
do
    pacman -Si $pkg &>/dev/null || echo "$pkg"
done
